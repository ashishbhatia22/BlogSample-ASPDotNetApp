Quick Steps

1. Deploy the cloudformation template. This well deploy the following resources..
    -- A vpc with 2 availbility zones with a public and private subnet in each.
    -- A load balancer with a ip type target group.
    -- A ECS cluster with 1 EC2 instance node based on linux.
    -- A cloudmap Namcespace to easily connect services on your cluster
    -- 2 ECR repositories for pushing your application and custom adot images.
    -- Amazon Opensearch Cluster to send logs.
    -- Amazon Managed Prometheus to send metrics.
   
aws cloudformation deploy --template ./blog-cf-template.yml --stack-name blog-solution-stack --capabilities CAPABILITY_NAMED_IAM --region us-east-1

2. Update and deploy your ECS Service.
    - Add the private subnets from the CloudFormation output to the service-connect-adot.json
    - Add the default security group id from the CloudFormation output to your service and the AdotService Security group to your service.
    - Run the following command to launch your service.

  aws ecs create-service --cluster BlogCluster --cli-input-json file://adot-service.json --region us-east-1

3. Launch the application service by running the following command.

       aws ecs create-service --cluster BlogCluster --cli-input-json file://sample-app-service.json --region us-east-1


